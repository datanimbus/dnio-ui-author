<div class="settings-page page-padding bg-light-gray">
    <div class="d-flex justify-content-between">
        <div class="d-flex align-items-center">
            <i class="fa fa-arrow-left text-secondary mr-3 fa-lg hover" aria-hidden="true" [routerLink]="['../']"></i>
            <div class="fw-600 font-22">Settings</div>
        </div>
    </div>
    <div class="mt-3 bg-white rounded p-4 dm-settings">
        <div class="fw-600 font-22 mb-4">Data Management</div>
        <div class="ds-stats d-flex justify-content-start">
            <div class="service-details p-3 bg-info">
                <div class="fw-600 font-20">{{serviceStatus.Total?serviceStatus.Total:0}}</div>
                <div class="pt-4 font-11 text-secondary">TOTAL FLOWS</div>
            </div>
            <div class="service-details p-3 bg-success">
                <div class="d-flex align-items-center justify-content-between">
                    <span class="fw-600 font-20"> {{serviceStatus.Active?serviceStatus.Active:0}} </span>
                    <button class="btn btn-sm btn-danger font-11 hover" [disabled]="!serviceStatus.Active"
                        (click)="startStopServiceModel('Stop')">Stop All</button>
                </div>
                <div class="pt-4 font-11 text-secondary">RUNNING FLOWS</div>
            </div>
            <div class="service-details p-3 bg-primary">
                <div class="fw-600 font-20">{{serviceStatus.Draft?serviceStatus.Draft:0}}</div>
                <div class="pt-4 font-11 text-secondary">IN DRAFTS</div>
            </div>
            <div class="service-details p-3 bg-danger">
                <div class="d-flex align-items-center justify-content-between">
                    <span class="fw-600 font-20"> {{serviceStatus.Stopped?serviceStatus.Stopped:0}} </span>
                    <button class="btn btn-sm btn-success font-11 hover" [disabled]="!serviceStatus.Stopped"
                        (click)="startStopServiceModel('Start')">Start All</button>
                </div>
                <div class="pt-4 font-11 text-secondary">STOPPED FLOWS</div>
            </div>
            <div class="service-details p-3 bg-secondary">
                <div class="fw-600 font-20">{{serviceStatus.Pending?serviceStatus.Pending:0}}</div>
                <div class="pt-4 font-11 text-secondary">MAINTAINANCE</div>
            </div>
        </div>
    </div>

    <div class="mt-3 bg-white rounded p-4">
        <div class="fw-600 font-22 mb-4 d-flex align-items-center justify-content-between">
            <span>Data Masking</span>
            <button type="button" class="btn btn-success" (click)="saveApp()" [disabled]="!changesDone">Save</button>
        </div>
        <div class="">
            <table class="table table-sm table-bordered">
                <thead class="table-secondary">
                    <tr>
                        <th>Data Path</th>
                        <th>Mask Type</th>
                        <th>Mask Chars</th>
                        <th>
                            <span class="dsi dsi-plus-circle text-accent hover" (click)="addMasking()"></span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of maskingPaths;let i=index">
                        <td>
                            <input type="text" class="form-control" [(ngModel)]="item.dataPath">
                        </td>
                        <td>
                            <select class="form-control" name="maskType" id="maskType" [(ngModel)]="item.maskType">
                                <option value="all">Mask All</option>
                                <option value="some">Mask Some</option>
                            </select>
                        </td>
                        <td>
                            <input *ngIf="item.maskType=='some'" type="number" class="form-control"
                                [(ngModel)]="item.chars">
                            <span *ngIf="item.maskType=='all'">{{item.maskType}}</span>
                        </td>
                        <td>
                            <span class="dsi dsi-trash text-danger hover" (click)="removeMasking(i)"></span>
                        </td>
                    </tr>
                    <tr *ngIf="!maskingPaths || maskingPaths.length==0">
                        <td colspan="4">No Masking Configured</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- <div class="default-loader d-flex justify-content-center w-100 h-100" *ngIf="showLazyLoader">
    <div class="align-self-center text-center">
        <div class="spinner-border text-dark" role="status">
            <span class="sr-only">Processing...</span>
        </div>
        <div class="text-secondary mt-2">Processing...</div>
    </div>
</div> -->

<ng-template #startStopServiceModalTemplate>
    <div class="modal-body p-4">
        <div class="d-flex align-items-center justify-content-between w-100">
            <span class="font-20 fw-600">{{startStopServiceModal.title}}</span>
            <span class="fa fa-times text-secondary hover " (click)="startStopServiceModalRef.close(false)"></span>
        </div>
        <p class="text-secondary text-center my-5">{{startStopServiceModal.message}}</p>
        <div class="d-flex align-items-center justify-content-end">
            <button type="button" class="btn btn-min-width btn-delete" (click)="startStopServiceModalRef.close(true)"
                id="sbDeleteModalYes">Yes</button>
        </div>
    </div>
</ng-template>